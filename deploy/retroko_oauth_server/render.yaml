services:
  - type: web
    name: retroko-oauth-server
    env: python
    repo: https://github.com/WM-AS-IN-TECH-IA/RETROKO
    branch: main
    buildCommand: pip install -r requirements.txt
    startCommand: uvicorn RETROKO_UNIFIED_AGENT:app --host 0.0.0.0 --port 8000
    envVars:
      - key: OAUTH_CLIENT_ID
        fromDotEnv: true
      - key: OAUTH_CLIENT_SECRET
        fromDotEnv: true
      - key: REDIRECT_URI
        fromDotEnv: true
      - key: ENCRYPTION_KEY
        fromDotEnv: true
    autoDeploy: true
    rootDir: deploy/retroko_oauth_server